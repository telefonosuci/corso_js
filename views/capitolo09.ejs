<!DOCTYPE html>
<html lang="en">

  <head>

    <scritp src="/javascripts/jquery.min.js"></scritp>

  </head>

  <body class="container">

    <main>
      <div>
        <h1>Capitolo 09</h1>
        <h2>Form e dati della UI</h2>
      </div>

      <div>

        <form id="myForm">
            <label for="name">Nome:</label>
            <input type="text" id="name" name="name" required>

            <br>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <br>

            <label for="age">Età:</label>
            <input type="number" id="age" name="age" required>

            <br>

            <label for="gender">Genere:</label>
            <select id="gender" name="gender" required>
                <option value="male">Maschio</option>
                <option value="female">Femmina</option>
                <option value="other">Altro</option>
            </select>

            <br>

            <label for="subscribe">Iscriviti alla newsletter:</label>
            <input type="checkbox" id="subscribe" name="subscribe">

            <br>

            <input type="submit" value="Invia">
        </form>

        <script>
            // Funzione per gestire l'invio del modulo
            document.getElementById('myForm').addEventListener('submit', function (event) {
                event.preventDefault(); // Evita l'invio del modulo

                // Recupera i valori inseriti dall'utente
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const age = document.getElementById('age').value;
                const gender = document.getElementById('gender').value;
                const subscribe = document.getElementById('subscribe').checked;

                // Visualizza i dati nella console
                console.log('Nome:', name);
                console.log('Email:', email);
                console.log('Età:', age);
                console.log('Genere:', gender);
                console.log('Iscriviti alla newsletter:', subscribe);

                // Crea un oggetto con i dati del modulo
                const formData = {
                    name: name,
                    email: email,
                    age: age,
                    gender: gender,
                    subscribe: subscribe
                };

                // Esegue una richiesta Fetch in POST
                fetch('https://demo2575522.mockable.io/students', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Dati inviati con successo:', data);
                    // Puoi aggiungere ulteriori azioni dopo l'invio dei dati
                })
                .catch(error => {
                    console.error('Errore durante l\'invio dei dati:', error);
                });

            });
        </script>


      </div>
    </main>

  </body>
</html>
